<!DOCTYPE html>
<html lang="en">
  <head>
    <link rel="shortcut icon" href="favicon.png" type="image/x-icon" />
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <title>Denm Triggering Application</title>
    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="jquery.min.js"></script>
    <script src="jquery.powertip.min.js"></script>
    <script src="jquery-ui.min.js"></script>
    <script src="doxy-jquery.js"></script>
    <script src="dynsections.js"></script>
    <link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
    <link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
    <!-- Bootstrap -->
    <link href="doxygen.css" rel="stylesheet">
    <link href="fonts.css" rel="stylesheet">
    <link href="bootstrap.min.css" rel="stylesheet">
    <link href="jquery.smartmenus.bootstrap.css" rel="stylesheet">
    <link href="yogoko.css" rel="stylesheet">
    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
  </head>
  <body>
      <div id="top">
        <nav class="navbar navbar-inverse">
          <div class="container-fluid">
            <!-- Brand and toggle get grouped for better mobile display -->
            <div class="navbar-header">
              <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar-collapse" aria-expanded="false">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              <a class="navbar-brand" id="brand-logo" href="https://www.yogoko.com/"><img height="40px" src="yogoko-logo-svg-fr-white.png" /></a>
              <p class="navbar-text text-center visible-xs">Documentation</p>
            </div>
            <!-- Collect the nav links, forms, and other content for toggling -->
            <div class="collapse navbar-collapse" id="navbar-collapse">
              <p class="navbar-text navbar-left"><span id="projectbrief">YoGoKo Smart Middleware</span></p>
              <ul id="yogoko-navlist" class="nav navbar-nav"></ul>
              <form id="yogoko-searchform" class="navbar-form navbar-left navbar-right hidden-sm hidden-xs">
                 <div class="form-group">
                   <div id="MSearchBox" class="MSearchBoxActive">
                     <div class="input-group">
                       <div class="input-group-addon">
                         <span id="MSearchSelect" class="glyphicon glyphicon-search" aria-hidden="true" onmouseover="return searchBox.OnSearchSelectShow()" onmouseout="return searchBox.OnSearchSelectHide()"></span>
                       </div>
                       <input class="form-control" type="text" id="MSearchField" placeholder="" accesskey="S" onfocus="searchBox.OnSearchFieldFocus(true)" onblur="searchBox.OnSearchFieldFocus(false)" onkeyup="searchBox.OnSearchFieldChange(event)">
                       <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()">
                         <span id="search-reset" class="glyphicon glyphicon-remove-circle" aria-hidden="true"></span>
                       </a>
                     </div>
                   </div>
                 </div>
              </form>
            </div><!-- /.navbar-collapse -->
          </div><!-- /.container-fluid -->
        </nav>
      </div>
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('denmtriggeringapplication.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Denm Triggering Application </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>The Denm Triggering Application allows users to trigger predefined DENM use-cases, based on templates defined in mibs.</p>
<p>The application allows users to trigger static or mobile events, and to overload fields from the template when triggering an event.</p>
<h1>DENM templates</h1>
<p>DenmTriggeringApplication use predefined DENM use-cases to trigger DENM event. These use-cases are defined in mibs as compliance JSON format to be inserted inside the xml configuration file.<br />
 Several templates are available in the default configuration (80-denmapp.xml) to satisfy a wide range of use-cases.<br />
</p>
<table class="doxtable">
<tr>
<th>Use-case </th><th>Name </th><th>Causecode </th><th>Duration  </th></tr>
<tr>
<td>denm1 </td><td>accident </td><td>2 </td><td>1h </td></tr>
<tr>
<td>denm2 </td><td>adverse-extremecondition </td><td>17 </td><td>1h </td></tr>
<tr>
<td>denm3 </td><td>adverse-lowvisibility </td><td>18 </td><td>1h </td></tr>
<tr>
<td>denm4 </td><td>adverse-precipation </td><td>19 </td><td>1h </td></tr>
<tr>
<td>denm5 </td><td>adverse-slipperyroad </td><td>6 </td><td>2h </td></tr>
<tr>
<td>denm6 </td><td>endofqueue </td><td>27 </td><td>10min </td></tr>
<tr>
<td>denm7 </td><td>hazardouslocation-animal </td><td>11 </td><td>10min </td></tr>
<tr>
<td>denm8 </td><td>hazardouslocation-curve </td><td>96 </td><td>24h </td></tr>
<tr>
<td>denm9 </td><td>hazardouslocation-human </td><td>12 </td><td>10min </td></tr>
<tr>
<td>denm10 </td><td>hazardouslocation-obstacle </td><td>10 </td><td>30min </td></tr>
<tr>
<td>denm11 </td><td>rescueinprogress </td><td>15 </td><td>30min </td></tr>
<tr>
<td>denm12 </td><td>roadworks </td><td>3 </td><td>2min </td></tr>
<tr>
<td>denm13 </td><td>slowvehicle </td><td>26 </td><td>2min </td></tr>
<tr>
<td>denm14 </td><td>stationaryvehicle </td><td>94 </td><td>1h </td></tr>
<tr>
<td>denm15 </td><td>wrongway </td><td>14 </td><td>10min </td></tr>
<tr>
<td>denm16 </td><td>endofqueue2 </td><td>3 </td><td>12min </td></tr>
</table>
<h1>Triggering events</h1>
<h2>General principles</h2>
<p>DenmTriggeringApplication works with mibs to trigger DENM event. As several use-cases are already defined, user just have to activate one of its use-case to trigger an event. Same way to cancel to cancel an event, user have to deactivate its use-case.<br />
</p>
<p>Each use-case can trigger up to 9 static events and 1 mobile event. Event triggering is performed by setting MIBs of the application. Events are defined as follows: <em><b>denm&lt;n&gt;(s|m)&lt;m&gt;</b></em> , where:</p><ul>
<li><em><b>n</b></em> identifies the id of the use-case</li>
<li><em><b>s|m</b></em> identifies whether we are triggering a static (s) or a mobile (m) event.</li>
<li><em><b>m</b></em> identifies is a slot for event triggering, each slot allowing to instantiate the use-case with its own parameters (position, overriden values, etc)</li>
</ul>
<p>For example: User can trigger the same use-case three times by activate denm1s1, denm1s2 and denm1s3. <br />
 User can also overriding fields from the template to trigger the perfect event he want to. To doing this, he should indicate the number of fields to overload, their paths in JSON template, and their new values.</p>
<h2>Static event</h2>
<p>DenmTriggeringApplication can trigger static DENM event by using parameter 's' in second slot. User can choose to trigger it at a specific position by setting its latitude, longitude or if latitude,longitude is not provided, the position of the vehicle.<br />
 The static event will be active until it expires or is explicitly deactivated by setting active to false. The static event is automatically deactivated when it reaches expiration. <br />
</p>
<h2>Mobile event</h2>
<p>DenmTriggeringApplication can trigger mobile DENM event by using parameter 'm' in second slot.<br />
 These mobile events update regularly their position with vehicle position, according to an interval defined by denmapp.updateinterval.<br />
 The moving event will be active until it is explicitly deactivated by setting active to false.</p>
<h1>MIBs</h1>
<p>Details of MIB entries :</p>
<table class="doxtable">
<tr>
<th>Section </th><th>Field </th><th>R/W </th><th>Type </th><th>Default value </th><th>Description  </th></tr>
<tr>
<td>choir </td><td>applicationid </td><td>RW </td><td>int </td><td>611 </td><td></td></tr>
<tr>
<td>choir </td><td>denmtriggerid </td><td>RW </td><td>int </td><td>25 </td><td>Message ID use to trigger DENM event </td></tr>
<tr>
<td>choir </td><td>vdpcacheid </td><td>RW </td><td>int </td><td>0 </td><td>Cache ID of vdp cache </td></tr>
<tr>
<td>denmapp </td><td>activedenms </td><td>R </td><td>int </td><td>0 </td><td>Number of actives denm </td></tr>
<tr>
<td>denmapp </td><td>updateinterval </td><td>RW </td><td>int </td><td>1000 </td><td>Interval between 2 update of mobile event </td></tr>
<tr>
<td>denms </td><td>count </td><td>RW </td><td>int </td><td>0 </td><td>Number of predefined use-cases </td></tr>
<tr>
<td>denm&lt;n&gt; </td><td>name </td><td>RW </td><td>string </td><td></td><td>Name of use-case </td></tr>
<tr>
<td>denm&lt;n&gt; </td><td>template </td><td>W </td><td>string </td><td></td><td>JSON template of use-case </td></tr>
<tr>
<td>denm&lt;n&gt;m1 </td><td>active </td><td>RW </td><td>bool </td><td></td><td>Status of use-case </td></tr>
<tr>
<td>denm&lt;n&gt;m1 </td><td>stationid </td><td>R </td><td>string </td><td></td><td>Originating station ID of use-case </td></tr>
<tr>
<td>denm&lt;n&gt;m1 </td><td>sequencenumber </td><td>R </td><td>string </td><td></td><td></td></tr>
<tr>
<td>denm&lt;n&gt;m1 </td><td>fields.count </td><td>RW </td><td>int </td><td>0 </td><td>Number of fields overloaded </td></tr>
<tr>
<td>denm&lt;n&gt;m1 </td><td>field&lt;n&gt;.path </td><td>RW </td><td>string </td><td></td><td>Path inside JSON of field to overload </td></tr>
<tr>
<td>denm&lt;n&gt;m1 </td><td>field&lt;n&gt;.value </td><td>RW </td><td>any </td><td></td><td>New value of field to overload </td></tr>
<tr>
<td>denm&lt;n&gt;s&lt;m&gt; </td><td>active </td><td>RW </td><td>bool </td><td></td><td>Status of use-case </td></tr>
<tr>
<td>denm&lt;n&gt;s&lt;m&gt; </td><td>stationid </td><td>R </td><td>string </td><td></td><td>Originating station ID of use-case </td></tr>
<tr>
<td>denm&lt;n&gt;s&lt;m&gt; </td><td>sequencenumber </td><td>R </td><td>string </td><td></td><td></td></tr>
<tr>
<td>denm&lt;n&gt;s&lt;m&gt; </td><td>latitude </td><td>RW </td><td>float </td><td></td><td>Latitude of the event (deg) </td></tr>
<tr>
<td>denm&lt;n&gt;s&lt;m&gt; </td><td>longitude </td><td>RW </td><td>float </td><td></td><td>Longitude of the event (deg) </td></tr>
<tr>
<td>denm&lt;n&gt;s&lt;m&gt; </td><td>altitude </td><td>RW </td><td>float </td><td></td><td>Altitude of the event (m) </td></tr>
<tr>
<td>denm&lt;n&gt;s&lt;m&gt; </td><td>expiration </td><td>R </td><td>int </td><td>0 </td><td>Expiration duration of the event </td></tr>
<tr>
<td>denm&lt;n&gt;s&lt;m&gt; </td><td>fields.count </td><td>RW </td><td>int </td><td>0 </td><td>Number of fields overloaded </td></tr>
<tr>
<td>denm&lt;n&gt;s&lt;m&gt; </td><td>field&lt;n&gt;.path </td><td>RW </td><td>string </td><td></td><td>New value of field to overload </td></tr>
<tr>
<td>denm&lt;n&gt;s&lt;m&gt; </td><td>field&lt;n&gt;.value </td><td>RW </td><td>any </td><td></td><td>Status of use-case </td></tr>
</table>
<h1>Usage examples</h1>
<p><b>Trigger a static "accident" event</b></p>
<div class="fragment"><div class="line">$ mwconfig mib set -t DenmTrigApplication &#39;denm1s1.active=true&#39; &#39;denm1s1.latitude=48.1361008&#39; &#39;denm1s1.longitude=-1.6244616&#39;</div></div><!-- fragment --><p><b>Trigger a static "accident" event of 2 hours using current position</b></p>
<p>According to denm1 template, its default validity duration would be 1 hour, so we need to overload 'validityDuration'.</p>
<div class="fragment"><div class="line">$ mwconfig mib set -t DenmTrigApplication &#39;denm1s1.active=true&#39; &#39;denm1s1.fields.count=1&#39; &#39;denm1s1.field1.path=&quot;validityDuration&quot;&#39; &#39;denm1s1.field1.value=&quot;7200&quot;&#39;</div></div><!-- fragment --><p><b>Trigger two static "accident" events at different positions</b></p>
<div class="fragment"><div class="line">$ mwconfig mib set -t DenmTrigApplication &#39;denm1s1.active=true&#39; &#39;denm1s1.latitude=48.1361008&#39; &#39;denm1s1.longitude=-1.6244616&#39;</div><div class="line">$ mwconfig mib set -t DenmTrigApplication &#39;denm1s2.active=true&#39; &#39;denm1s2.latitude=48.1351897&#39; &#39;denm1s2.longitude=-1.6230662&#39;</div></div><!-- fragment --><p><b>Trigger a mobile "accident" event</b></p>
<div class="fragment"><div class="line">$ mwconfig mib set -t DenmTrigApplication &#39;denm1m1.active=true&#39;</div></div><!-- fragment --><p><b>Cancel a mobile "accident" event</b></p>
<div class="fragment"><div class="line">$ mwconfig mib set -t DenmTrigApplication &#39;denm1m1.active=false&#39;</div></div><!-- fragment --> </div></div><!-- contents -->
</div><!-- doc-content -->
    <div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
        <ul>
            <li class="footer">Generated on Tue Mar 14 2023 16:13:25 by <a href="http://www.doxygen.org/index.html">
                       <img class="footer" src="doxygen.png" alt="doxygen"></a> 1.8.13</li>
        </ul>
    </div>
    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <script src="bootstrap.min.js"></script>
    <script src="jquery.smartmenus.min.js"></script>
    <script src="jquery.smartmenus.bootstrap.min.js"></script>
    <script src="yogoko-doxy.js"></script>
  </body>
</html>
