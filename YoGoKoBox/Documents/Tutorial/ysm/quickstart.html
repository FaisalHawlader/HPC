<!DOCTYPE html>
<html lang="en">
  <head>
    <link rel="shortcut icon" href="favicon.png" type="image/x-icon" />
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <title>Quick Start</title>
    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="jquery.min.js"></script>
    <script src="jquery.powertip.min.js"></script>
    <script src="jquery-ui.min.js"></script>
    <script src="doxy-jquery.js"></script>
    <script src="dynsections.js"></script>
    <link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
    <link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
    <!-- Bootstrap -->
    <link href="doxygen.css" rel="stylesheet">
    <link href="fonts.css" rel="stylesheet">
    <link href="bootstrap.min.css" rel="stylesheet">
    <link href="jquery.smartmenus.bootstrap.css" rel="stylesheet">
    <link href="yogoko.css" rel="stylesheet">
    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
  </head>
  <body>
      <div id="top">
        <nav class="navbar navbar-inverse">
          <div class="container-fluid">
            <!-- Brand and toggle get grouped for better mobile display -->
            <div class="navbar-header">
              <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar-collapse" aria-expanded="false">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              <a class="navbar-brand" id="brand-logo" href="https://www.yogoko.com/"><img height="40px" src="yogoko-logo-svg-fr-white.png" /></a>
              <p class="navbar-text text-center visible-xs">Documentation</p>
            </div>
            <!-- Collect the nav links, forms, and other content for toggling -->
            <div class="collapse navbar-collapse" id="navbar-collapse">
              <p class="navbar-text navbar-left"><span id="projectbrief">YoGoKo Smart Middleware</span></p>
              <ul id="yogoko-navlist" class="nav navbar-nav"></ul>
              <form id="yogoko-searchform" class="navbar-form navbar-left navbar-right hidden-sm hidden-xs">
                 <div class="form-group">
                   <div id="MSearchBox" class="MSearchBoxActive">
                     <div class="input-group">
                       <div class="input-group-addon">
                         <span id="MSearchSelect" class="glyphicon glyphicon-search" aria-hidden="true" onmouseover="return searchBox.OnSearchSelectShow()" onmouseout="return searchBox.OnSearchSelectHide()"></span>
                       </div>
                       <input class="form-control" type="text" id="MSearchField" placeholder="" accesskey="S" onfocus="searchBox.OnSearchFieldFocus(true)" onblur="searchBox.OnSearchFieldFocus(false)" onkeyup="searchBox.OnSearchFieldChange(event)">
                       <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()">
                         <span id="search-reset" class="glyphicon glyphicon-remove-circle" aria-hidden="true"></span>
                       </a>
                     </div>
                   </div>
                 </div>
              </form>
            </div><!-- /.navbar-collapse -->
          </div><!-- /.container-fluid -->
        </nav>
      </div>
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('quickstart.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Quick Start </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>This page provides a Quick Start Guide for using and interacting with YoGoKo software stack.</p>
<p>It provides basic commands and tutorials to perform common operations.</p>
<h1>Starting YoGoKo software stack</h1>
<p>This section describes how to start software components from YoGoKo software stack.</p>
<p>Note that this step should commonly be skipped as software components are automatically started at system bootup, in general system setups. The stack setup and dependencies between components are controlled by systemd.</p>
<h2>Plugging and powering the YoGoKo Box</h2>
<p>The setup of YoGoKo Box hardware references is described in Quick Setup Guides dedicated to each hardware reference. The quick setup guide corresponding to your hardware should have been provided with the box, or can be requested from <a href="#" onclick="location.href='mai'+'lto:'+'sup'+'po'+'rt@'+'yo'+'gok'+'o.'+'fr'; return false;">suppo<span style="display: none;">.nosp@m.</span>rt@y<span style="display: none;">.nosp@m.</span>ogoko<span style="display: none;">.nosp@m.</span>.fr</a>.</p>
<h2>Starting/stopping YoGoKo Smart Middleware</h2>
<p><b>Using systemd</b></p>
<p>Starting the middleware:</p>
<p><code>$ systemctl start mw-server</code></p>
<p>Stopping the middleware:</p>
<p><code>$ systemctl stop mw-server</code></p>
<p>Restarting the middleware:</p>
<p><code>$ systemctl restart mw-server</code></p>
<p><b>Alternative method</b></p>
<p>Manually start the middleware from command-line:</p>
<p><code>$ cd config-directory/</code></p>
<p><code>$ java -jar middleware-server.jar</code></p>
<p>Stop using Ctrl+C</p>
<h2>Starting itsnet</h2>
<p><b>Using systemd</b></p>
<p>Starting itsnet:</p>
<p><code>$ systemctl start gn-itsnet</code></p>
<p>Stopping itsnet:</p>
<p><code>$ systemctl stop gn-itsnet</code></p>
<p>Restarting itsnet:</p>
<p><code>$ systemctl restart gn-itsnet</code></p>
<p><b>Alternative method</b></p>
<p>Manually start itsnet from command-line:</p>
<p><code>$ itsnet -d -c config-directory/itsnet.conf</code></p>
<p>Stop using Ctrl+C</p>
<h1>Configuring YoGoKo software stack</h1>
<h2>Configuring mw-server</h2>
<p>The configuration of YoGoKo Smart Middleware is commonly located in the following directories:</p>
<table class="doxtable">
<tr>
<th>Configuration file/folder</th><th>Description  </th></tr>
<tr>
<td>/etc/mw-server/choirconf.xml</td><td>Main configuration value, controlling the general behavior of YoGoKo Smart Middleware </td></tr>
<tr>
<td>/etc/mw-server/log4j.properties</td><td>Log policy and verbosity </td></tr>
<tr>
<td>/etc/mw-server/config/</td><td>Configurations files for each service, controlling behavior of each service (CaService, DenService, LdmService, etc) </td></tr>
</table>
<p>These configuration files allows to tune and adapt the behavior of the platform according to users need, for instance:</p><ul>
<li>Setting the static Station ID (when security is disabled)</li>
<li>Making the station behave as a RSU or an OBU</li>
<li>Enabling/Disabling certain facilities or applications on middleware start-up</li>
<li>Enabling/Disabling ITS security</li>
<li>Depending on system setups, managing Geonetworking (libgn) and Autotalks platform configurations</li>
</ul>
<p>Configuration files are commented out and detail configuration keys and values. Some configuration values may then be modified while the middleware is running.</p>
<h2>Configuring itsnet (as a standalone daemon)</h2>
<p>Depending on system setups, that is when libgn is started as the standalone daemon itsnet, the configuration of itsnet is located in the following file:</p>
<ul>
<li><em><b>/etc/itsnet/itsnet.conf</b></em></li>
</ul>
<h1>Interacting with YoGoKo software stack</h1>
<p>We provide simple and user-friendly means to interact with YoGoKo Smart Middleware:</p><ul>
<li><b>From command-line</b>: Using <b>its-tools</b>, a set of helper scripts that provide a shorthand access to YoGoKo Smart Middleware APIs, and using applications bundled with the middleware</li>
<li><b>From a tablet</b>: Using <b>YoGoKo HMI</b> application, providing visualization of data processed by YoGoKo Smart Middleware</li>
</ul>
<p>Examples below describe interaction with YoGoKo software stack by several of these means.</p>
<h2>Watching received/sent C-ITS messages</h2>
<p>C-ITS messages are sent and received by middleware services This section shows how to easily access to or monitor the flow of messages that are received or sent by YoGoKo software stack.</p>
<p>Note: These examples are provided for DENM messages, similar commands exist for visualizing other C-ITS messages (CAM, MAP, SPAT, IVI, ...).</p>
<p><b>From the command-line</b></p>
<p>Flow of received DENM messages, and successfully processed by the DENM service:</p>
<p><code>$ its-denm-received</code></p>
<p>Flow of sent DENM messages, after processing by the DENM service:</p>
<p><code>$ its-denm-sent</code></p>
<p>Flow of DENM triggers, sent by applications to the DENM service:</p>
<p><code>$ its-denm-triggers</code></p>
<h2>Displaying the LDM</h2>
<p>The LDM (Local Dynamic Map) stores in a cache C-ITS messages received from V2X communications and from sensors. This section shows how to easily display objets stored in the LDM.</p>
<p>Note: These examples are provided for objets stored in the Events LDM (extracted from DENM messages), similar commands exist for other types of LDM objets (Stations, Traffic Lights, Signages, ...).</p>
<p><b>From the command-line</b></p>
<p>Show objets from the events LDM, corresponding to active and relevant DENMs:</p>
<p><code>$ its-ldmevents-show</code></p>
<p>Monitor updates (insertion, update, deletion) to the events LDM:</p>
<p><code>$ its-ldmevents-updates</code></p>
<p><b>From the HMI</b></p>
<p>The HMI provides a visual representation of LDM caches as an interactive map. Events and signages are also detailled on a side panel.</p>
<div class="image">
<img src="quickstart_map_events_osm.png" alt="quickstart_map_events_osm.png"/>
<div class="caption">
Content of LDM caches</div></div>
<h2>Controlling Vehicle and PVT data</h2>
<p>The VDP (Vehicle Data Provisioning) manages and stores data associated to the current station (ego-station), that is PVT data (Position, Velocity and Time) and informations from local sources (CAN bus, sensors). This section shows how to easily monitor or get data stored in the VDP.</p>
<p><b>From the command-line</b></p>
<p>Get a specific key in the VDP cache (for instance speed of the vehicle):</p>
<p><code>$ its-vdp-get --key=speed</code></p>
<p>Monitor updates (insertion, update, deletion) to the VDP cache:</p>
<p><code>$ its-vdp-updates</code></p>
<p>Push a manual update to the VDP cache:</p>
<p><code>$ its-vdp-sendupdate</code></p>
<p><b>From the HMI</b></p>
<p>Data stored in VDP is accessible on the HMI under the 'Informations' panel.</p>
<div class="image">
<img src="quickstart_map_stationsInfos.png" alt="quickstart_map_stationsInfos.png"/>
<div class="caption">
Informations collected by LdmStations for this station</div></div>
<h2>Sending messages</h2>
<p><b>From the command-line</b></p>
<p>Show configuration of the DenmTrigApplication service (lists existing DENM Use-Cases):</p>
<p><code>$ mwconfig mib get-all -o -t DenmTrigApplication</code></p>
<p>Sample output:</p>
<p><code>denmapp.updateinterval = "100"</code> <br />
 <code>denm1.name = "accident"</code> <br />
 <code>denm1.template = "(...)"</code> <br />
 <code>denm2.name = "adverse"</code> <br />
 <code>denm2.template = "(...)"</code> <br />
 <code>denms.count = "2"</code></p>
<p>Trigger a static DENM using the Use-Case accident (denm1), at position +48.5512784;-1.6222593:</p>
<p><code>$ mwconfig mib set -t DenmTrigApplication 'denm1s1.active=true'</code> <code>'denm1s1.latitude=48.5512784'</code> <code>'denm1s1.longitude=-1.6222593'</code></p>
<p>Trigger a mobile DENM using the Use-Case adverse (denm2), following the position of the ego-station:</p>
<p><code>$ mwconfig mib set -t DenmTrigApplication 'denm2m1.active=true'</code></p>
<p><b>From the HMI</b></p>
<p>The HMI can be used to trigger static or mobile denm use-cases.</p>
<div class="image">
<img src="quickstart_map_several_triggers.png" alt="quickstart_map_several_triggers.png"/>
<div class="caption">
Trigger two static events and one mobile</div></div>
 <h2>Controlling the C-ITS stack</h2>
<p><b>From the command-line</b></p>
<p>Check status of DenService</p>
<p><code>$ mwconfig control status -t DenService</code></p>
<p>Enable DenService</p>
<p><code>$ mwconfig control start -t DenService</code></p>
<p>Change relevance distance for event in LdmService</p>
<p><code>$ mwconfig mib set event.relevancedistance=500 -t LdmService</code></p>
<p><b>From the HMI</b></p>
<p>The HMI allows to control services (start/stop) and modify their configuration on the fly, from the configuration panel.</p>
<div class="image">
<img src="quickstart_config_services.png" alt="quickstart_config_services.png"/>
<div class="caption">
List of middleware services configurable</div></div>
 <h2>Capturing raw packets</h2>
<p><b>From the command-line</b></p>
<p>The V2X interfaces are presented on the system as v2x0 (802.11p/ITS-G5 radio 1) and v2x1 (802.11p/ITS-G5 radio 2).</p>
<p>A user may capture packets on a V2X interface using the following command:</p>
<p><code>$ tshark -i v2x0</code></p>
<h1>Compiling and running software for YoGoKo software stack</h1>
<h2>Java compilation and execution</h2>
<p>The mw-java-api jar file can be used to allow a Java program to communicate with YoGoKo Smart Middleware. It also embeds an ASN.1 encoder/decoder with definitions of C-ITS messages. The jar file is provided in the SDK.</p>
<p>Libraries to include:</p><ul>
<li><code>mw-java-api</code></li>
</ul>
<h2>C/C++ compilation and execution</h2>
<p>The libchoir library can be used to allow a C/C++ program to communicate with the YoGoKo Smart Middleware. Libraries and headers are provided in the SDK.</p>
<p>Header files to include:</p><ul>
<li><code>choir_client.h</code> to use the choir API</li>
<li><code>choir_logger.h</code> to get debug and error messages.</li>
</ul>
<p>Libraries to include:</p><ul>
<li><code>lchoirclient1</code></li>
</ul>
<p>Compilation example:</p>
<p><code>$ gcc subscribe_example.c -lchoirclient1 -o subscribe_example</code></p>
<h2>Usage of the Websocket API</h2>
<p><b>Connection to the Websocket API</b></p>
<p>YoGoKo Smart Middleware listens on port 8080 for incoming connections to the Websocket API. Further informations on the usage of the Websocket API may be found on page Websocket. </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
    <div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
        <ul>
            <li class="footer">Generated on Tue Mar 14 2023 16:13:24 by <a href="http://www.doxygen.org/index.html">
                       <img class="footer" src="doxygen.png" alt="doxygen"></a> 1.8.13</li>
        </ul>
    </div>
    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <script src="bootstrap.min.js"></script>
    <script src="jquery.smartmenus.min.js"></script>
    <script src="jquery.smartmenus.bootstrap.min.js"></script>
    <script src="yogoko-doxy.js"></script>
  </body>
</html>
