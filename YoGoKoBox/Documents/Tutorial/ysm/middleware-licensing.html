<!DOCTYPE html>
<html lang="en">
  <head>
    <link rel="shortcut icon" href="favicon.png" type="image/x-icon" />
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <title>Licensing modes</title>
    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="jquery.min.js"></script>
    <script src="jquery.powertip.min.js"></script>
    <script src="jquery-ui.min.js"></script>
    <script src="doxy-jquery.js"></script>
    <script src="dynsections.js"></script>
    <link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
    <link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
    <!-- Bootstrap -->
    <link href="doxygen.css" rel="stylesheet">
    <link href="fonts.css" rel="stylesheet">
    <link href="bootstrap.min.css" rel="stylesheet">
    <link href="jquery.smartmenus.bootstrap.css" rel="stylesheet">
    <link href="yogoko.css" rel="stylesheet">
    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
  </head>
  <body>
      <div id="top">
        <nav class="navbar navbar-inverse">
          <div class="container-fluid">
            <!-- Brand and toggle get grouped for better mobile display -->
            <div class="navbar-header">
              <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar-collapse" aria-expanded="false">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              <a class="navbar-brand" id="brand-logo" href="https://www.yogoko.com/"><img height="40px" src="yogoko-logo-svg-fr-white.png" /></a>
              <p class="navbar-text text-center visible-xs">Documentation</p>
            </div>
            <!-- Collect the nav links, forms, and other content for toggling -->
            <div class="collapse navbar-collapse" id="navbar-collapse">
              <p class="navbar-text navbar-left"><span id="projectbrief">YoGoKo Smart Middleware</span></p>
              <ul id="yogoko-navlist" class="nav navbar-nav"></ul>
              <form id="yogoko-searchform" class="navbar-form navbar-left navbar-right hidden-sm hidden-xs">
                 <div class="form-group">
                   <div id="MSearchBox" class="MSearchBoxActive">
                     <div class="input-group">
                       <div class="input-group-addon">
                         <span id="MSearchSelect" class="glyphicon glyphicon-search" aria-hidden="true" onmouseover="return searchBox.OnSearchSelectShow()" onmouseout="return searchBox.OnSearchSelectHide()"></span>
                       </div>
                       <input class="form-control" type="text" id="MSearchField" placeholder="" accesskey="S" onfocus="searchBox.OnSearchFieldFocus(true)" onblur="searchBox.OnSearchFieldFocus(false)" onkeyup="searchBox.OnSearchFieldChange(event)">
                       <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()">
                         <span id="search-reset" class="glyphicon glyphicon-remove-circle" aria-hidden="true"></span>
                       </a>
                     </div>
                   </div>
                 </div>
              </form>
            </div><!-- /.navbar-collapse -->
          </div><!-- /.container-fluid -->
        </nav>
      </div>
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('middleware-licensing.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Licensing modes </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>The YoGoKo Y-Smart Middleware relies on license files in order to execute. The license file ensures authorization and unicity of the middleware's execution.</p>
<p>The YoGoKo Y-Smart Middleware will fail to start if it is not properly configured with a valid license file.</p>
<p>Several modes exist, depending on the environment of execution:</p><ul>
<li><em><b>Static license file</b></em>: For embedded platforms (OBUs, RSUs, etc)</li>
<li><em><b>Download static license file</b></em>: For large scale deployment in embedded platforms (OBUs, RSUs, etc)</li>
<li><em><b>Online license file</b></em>: For server platforms (Central ITS Stations, Virtual RSUs, etc)</li>
</ul>
<p><b>Note:</b> The modes listed above and their characteristics may change in future versions.</p>
<h1>Static license mode</h1>
<p>The static license mode is intended for embedded platforms such as OBUs and RSUs. It does not rely on a network connectivity and thus may be checked autonomously by the embedded system. This is the default licensing mode.</p>
<p>A license file is generated once for each unit, and stored locally on the embedded system (generally in configuration files). It is generated based on hardware identifiers of the device (platform serial number, hard drive serial number, etc).</p>
<h2>Informations in the license file</h2>
<p>The license currently include the following informations:</p><ul>
<li><em><b>systemid</b></em>: The system identifier (e.g. hardware information) the license is bound to.</li>
<li><em><b>hostname</b></em>: The hostname of the device the license has been generated for. For now, it is not enforced and used only as a hint.</li>
<li><em><b>validity time</b></em>: Time from which the license is valid</li>
<li><em><b>expiration time</b></em>: Time from which the license is not longer valid</li>
</ul>
<p>Licenses may or may not be limited in time. The generation of a time-limited or a non time-limited license is ruled by contract or agreement.</p>
<p><b>Changes in MW v2.6</b>: Until middleware version 2.6, a basic license file was used (license format v0). From version 2.6, a new license file is introduced (license format v1). The license format is now versioned. Backward compatibility is ensured, allowing the middleware version 2.6 to execute on devices with a v0 icense file.</p>
<h2>License request</h2>
<p>In order to generate the license file, the YoGoKo support team requests users to execute on each embedded system a script that calculates a string named System ID. This string is specific to the underlying hardware and sum ups hardware identifiers as detected by the middleware. The license file is then generated based on this System ID and delivered to the user for installation on their embedded system.</p>
<p>The System ID may be retrieved using the following command: </p><div class="fragment"><div class="line">$ java -jar middleware-server.jar -s</div></div><!-- fragment --><p>Additionally, the hostname or the serial number of the unit must be provided. It may be retrieved using the following command: </p><div class="fragment"><div class="line">$ hostname</div></div><!-- fragment --><p>The result of these commands must be sent to <a href="#" onclick="location.href='mai'+'lto:'+'sup'+'po'+'rt@'+'yo'+'gok'+'o.'+'fr'; return false;">suppo<span style="display: none;">.nosp@m.</span>rt@y<span style="display: none;">.nosp@m.</span>ogoko<span style="display: none;">.nosp@m.</span>.fr</a>. The license file is generated by YoGoKo support team from the system identifier and the hostname. It should then be put in the configuration folder for the middleware to properly execute.</p>
<p><b>Changes in MW v2.6</b>: From middleware version 2.6, the System ID will only be generated if sufficient hardware information is present. The generation of the System ID may thus be rejected in case the middleware detects that the platform is not suitable for static license.</p>
<h2>Configuration</h2>
<p>In <em><b>choirconf.xml</b></em>:</p><ul>
<li>the license mode must be set to 'static' (default value)</li>
<li>the filepath must be set according to the path of the license file on the filesystem</li>
</ul>
<p>The configuration is detailled on page <a class="el" href="middleware-config.html">General Configurations</a></p>
<h2>Middleware operation</h2>
<p>YoGoKo Middleware operation in static license mode is as follows:</p><ol type="1">
<li>The middleware reads the static license file stored on the embedded system</li>
<li>The middleware checks that license file is valid and not corrupted</li>
<li>The middleware checks the license file against the System ID of the embedded system</li>
<li>The middleware checks the time validity of the license</li>
<li>If the license matches, the middleware continues its operations normally, otherwise it stops with a security error</li>
</ol>
<h1>Download static license mode</h1>
<p>The download static mode is intended for large scale or automated deployments of embedded devices (OBUs, RSUs, etc), where generation of system identifiers may be hard to do. It is a variant of the <em><b>static license mode</b></em>.</p>
<p>Contrarily to the static mode, users are not requested to issue license requests to YoGoKo support team. Instead, a client certificate is provided, to be installed on all units that need to be granted a license. When configured with this certificate, YoGoKo middleware automatically connects to the licensing server to request generation of a license.</p>
<p>Licenses generated by the licensing server in download-static mode are plain valid static licenses. The generated licenses do not need any Internet connectivity except for their generation by the licensing server.</p>
<p><b>Note</b>: As generated licenses are plain licenses, they cannot be revoked, and may be charged as static licenses.</p>
<h2>License request</h2>
<p>The YoGoKo support team generates the certificate file. The license is delivered to the user for installation on their devices. The client certificate currently has a 2 years validity, and must be renewed to continue being able to connect to the licensing server.</p>
<p>YoGoKo also provides a truststore to be used for connecting to the licensing server.</p>
<p>Some informations are associated to the client certificate, such as a certificate profile (validity of licenses to be issued), a request profile (type of devices the certificate is issued for), a quota (maximum of devices allowed). These informations are defined per project and may be requested for configuring the certificate in the licensing server.</p>
<h2>Configuration</h2>
<p>In <em><b>choirconf.xml</b></em>:</p><ul>
<li>the license mode must be set to 'download-static'</li>
<li>the filepath must be set according to the path the license file will be stored to on the filesystem, the middleware must have the right to write to this path</li>
<li>the certpath must be set to the path of the client certificate on the filesystem</li>
<li>the truststore must be set according to the path of the truststore file on the filesystem</li>
<li>the renewaltimethreshold should be set to an appropriate value to renew certificates before their expiration</li>
</ul>
<p>The configuration is detailled on page <a class="el" href="middleware-config.html">General Configurations</a></p>
<h2>Middleware operation</h2>
<p>YoGoKo Middleware operation in download static license mode is as follows:</p><ol type="1">
<li>The middleware reads the static license file stored on the embedded system, if already present</li>
<li>If the file is present, not corrupted, and not expired, the middleware use it as the license file, operations from <em><b>static license mode</b></em> thus apply</li>
<li>If the file is not present, or is corrupted, expired, or about to expire, the middleware requests a new license file from the licensing server</li>
<li>Upon reception of the license file from the server, the downloaded file is stored locally, operations from <em><b>static license mode</b></em> then applies</li>
<li>If download fails, the middleware stops with a security error</li>
</ol>
<p><b>Note</b>: When the license is about to expire, the middleware tries to renew it from the server, however, in case the request fails, it middleware execution continues with the still valid license file.</p>
<h1>Online license mode</h1>
<p>The online license file is intended for server platforms such as Central ITS Servers and Virtual RSUs. It does not rely on a hardware identifier and thus may be used on systems like Virtual Machines or containers that does not have stable hardware identifiers.</p>
<p>A client certificate file is generated for each unit, and stored locally on the server system (generally in configuration files). The certificate file contains an identity independent from the hardware, signed by YoGoKo Root Certificate Authority. This certificate is used by the middleware to access to YoGoKo's online licensing platform at <em><b>licensing.yogoko.net</b></em>. It may be limited in time.</p>
<h2>License request</h2>
<p>The YoGoKo support team generates the certificate file, without prior action or information from the user. The license is delivered to the user for installation on their server system.</p>
<p>YoGoKo also provides a truststore to be used for connecting to the licensing server.</p>
<h2>Configuration</h2>
<p>In <em><b>choirconf.xml</b></em>:</p><ul>
<li>the license mode must be set to 'online'</li>
<li>the certpath must be set to the path of the client certificate on the filesystem</li>
<li>the truststore must be set according to the path of the truststore file on the filesystem</li>
</ul>
<p>The configuration is detailled on page <a class="el" href="middleware-config.html">General Configurations</a></p>
<p><b>Changes in MW v2.6</b>: From middleware version 2.6, the client certificate in online mode is now provided with the <em><b>certpath</b></em>, instead of <em><b>filepath</b></em> in prior version. This change is made in order to ensure consistency with client certificates in download static mode. For backward compatibility, providing the client certificate using <em><b>filepath</b></em> in online mode is still supported.</p>
<h2>Middleware operation</h2>
<p>YoGoKo Middleware operation in online license mode is as follows:</p><ol type="1">
<li>The middleware reads the online license file stored on the server system</li>
<li>The middleware connects to <em><b>licensing.yogoko.net</b></em> and authenticates</li>
<li>If the certificate is valid, the license server grants to the middleware the authorization to execute</li>
<li>If the middleware is granted authorization to execute, it continues its operations normally, otherwise it stops with a security error</li>
<li>The middleware periodically reconnects to the licensing server to re-check the license validity and unicity</li>
<li>On re-check, if a validity or unicity error is detected, the license server revokes the authorization, and the middleware stops with a security error</li>
</ol>
<p><b>Note:</b> The licensing server checks unicity of middleware execution. If several middleware connects to the licensing server with the same certificate, the latest to connect is always granted access, then, duplicates middleware will be disconnected when they will re-check their license. </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
    <div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
        <ul>
            <li class="footer">Generated on Tue Mar 14 2023 16:13:25 by <a href="http://www.doxygen.org/index.html">
                       <img class="footer" src="doxygen.png" alt="doxygen"></a> 1.8.13</li>
        </ul>
    </div>
    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <script src="bootstrap.min.js"></script>
    <script src="jquery.smartmenus.min.js"></script>
    <script src="jquery.smartmenus.bootstrap.min.js"></script>
    <script src="yogoko-doxy.js"></script>
  </body>
</html>
