<!DOCTYPE html>
<html lang="en">
  <head>
    <link rel="shortcut icon" href="favicon.png" type="image/x-icon" />
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <title>FAQ</title>
    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="jquery.min.js"></script>
    <script src="jquery.powertip.min.js"></script>
    <script src="jquery-ui.min.js"></script>
    <script src="doxy-jquery.js"></script>
    <script src="dynsections.js"></script>
    <link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
    <link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
    <!-- Bootstrap -->
    <link href="doxygen.css" rel="stylesheet">
    <link href="fonts.css" rel="stylesheet">
    <link href="bootstrap.min.css" rel="stylesheet">
    <link href="jquery.smartmenus.bootstrap.css" rel="stylesheet">
    <link href="yogoko.css" rel="stylesheet">
    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
  </head>
  <body>
      <div id="top">
        <nav class="navbar navbar-inverse">
          <div class="container-fluid">
            <!-- Brand and toggle get grouped for better mobile display -->
            <div class="navbar-header">
              <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar-collapse" aria-expanded="false">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              <a class="navbar-brand" id="brand-logo" href="https://www.yogoko.com/"><img height="40px" src="yogoko-logo-svg-fr-white.png" /></a>
              <p class="navbar-text text-center visible-xs">Documentation</p>
            </div>
            <!-- Collect the nav links, forms, and other content for toggling -->
            <div class="collapse navbar-collapse" id="navbar-collapse">
              <p class="navbar-text navbar-left"><span id="projectbrief">YoGoKo Smart Middleware</span></p>
              <ul id="yogoko-navlist" class="nav navbar-nav"></ul>
              <form id="yogoko-searchform" class="navbar-form navbar-left navbar-right hidden-sm hidden-xs">
                 <div class="form-group">
                   <div id="MSearchBox" class="MSearchBoxActive">
                     <div class="input-group">
                       <div class="input-group-addon">
                         <span id="MSearchSelect" class="glyphicon glyphicon-search" aria-hidden="true" onmouseover="return searchBox.OnSearchSelectShow()" onmouseout="return searchBox.OnSearchSelectHide()"></span>
                       </div>
                       <input class="form-control" type="text" id="MSearchField" placeholder="" accesskey="S" onfocus="searchBox.OnSearchFieldFocus(true)" onblur="searchBox.OnSearchFieldFocus(false)" onkeyup="searchBox.OnSearchFieldChange(event)">
                       <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()">
                         <span id="search-reset" class="glyphicon glyphicon-remove-circle" aria-hidden="true"></span>
                       </a>
                     </div>
                   </div>
                 </div>
              </form>
            </div><!-- /.navbar-collapse -->
          </div><!-- /.container-fluid -->
        </nav>
      </div>
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('md_src_pages_faq.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">FAQ </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h2>How to retrieve received CAM messages (and more generally all other ITS messages) ?</h2>
<h3>Using the its-tools</h3>
<pre class="fragment">itsuser@YBOX-VEHI-1603-1324:~$ its-cam-received
Receiving received CAM messages
{"itsPduHeader":{"messageID":2,"protocolVersion":1,"stationId":9999},"cam":{"generationDeltaTime":46230,"camParameters":{"basicContainer":{"referencePosition":{"altitude":{"altitudeValue":13096,"altitudeConfidence":0},"posConfidenceEllipse":{"semiMajorOrientation":0,"semiMinorConfidence":1,"semiMajorConfidence":1},"latitude":481347572,"longitude":-16224152},"stationType":0},"highFrequencyContainer":{"0":{"vehicleLength":{"vehicleLengthValue":30,"vehicleLengthConfidenceIndication":4},"accelerationControl":"0000000","vehicleWidth":14,"yawRate":{"yawRateValue":32767,"yawRateConfidence":8},"heading":{"headingValue":0,"headingConfidence":127},"curvatureCalculationMode":2,"longitudinalAcceleration":{"longitudinalAccelerationValue":161,"longitudinalAccelerationConfidence":102},"driveDirection":2,"speed":{"speedValue":0,"speedConfidence":127},"curvature":{"curvatureConfidence":7,"curvatureValue":30001}}},"lowFrequencyContainer":{"0":{"vehicleRole":0,"exteriorLights":"00000000","pathHistory":[{"pathPosition":{"deltaAltitude":12800,"deltaLongitude":0,"deltaLatitude":0},"pathDeltaTime":5514700},{"pathPosition":{"deltaAltitude":12800,"deltaLongitude":2224,"deltaLatitude":2996}}]}}}}}
{"itsPduHeader":{"messageID":2,"protocolVersion":1,"stationId":9912},"cam":{"generationDeltaTime":46289,"camParameters":{"basicContainer":{"referencePosition":{"altitude":{"altitudeValue":9492,"altitudeConfidence":0},"posConfidenceEllipse":{"semiMajorOrientation":0,"semiMinorConfidence":1,"semiMajorConfidence":1},"latitude":481349512,"longitude":-16223208},"stationType":0},"highFrequencyContainer":{"0":{"vehicleLength":{"vehicleLengthValue":1023,"vehicleLengthConfidenceIndication":4},"accelerationControl":"0000000","vehicleWidth":61,"yawRate":{"yawRateValue":32767,"yawRateConfidence":8},"heading":{"headingValue":3601,"headingConfidence":127},"curvatureCalculationMode":2,"longitudinalAcceleration":{"longitudinalAccelerationValue":161,"longitudinalAccelerationConfidence":102},"driveDirection":2,"speed":{"speedValue":0,"speedConfidence":127},"curvature":{"curvatureConfidence":7,"curvatureValue":30001}}}}}}
{"itsPduHeader":{"messageID":2,"protocolVersion":1,"stationId":9999},"cam":{"generationDeltaTime":46335,"camParameters":{"basicContainer":{"referencePosition":{"altitude":{"altitudeValue":13096,"altitudeConfidence":0},"posConfidenceEllipse":{"semiMajorOrientation":0,"semiMinorConfidence":1,"semiMajorConfidence":1},"latitude":481347572,"longitude":-16224152},"stationType":0},"highFrequencyContainer":{"0":{"vehicleLength":{"vehicleLengthValue":30,"vehicleLengthConfidenceIndication":4},"accelerationControl":"0000000","vehicleWidth":14,"yawRate":{"yawRateValue":32767,"yawRateConfidence":8},"heading":{"headingValue":0,"headingConfidence":127},"curvatureCalculationMode":2,"longitudinalAcceleration":{"longitudinalAccelerationValue":161,"longitudinalAccelerationConfidence":    102},"driveDirection":2,"speed":{"speedValue":0,"speedConfidence":127},"curvature":{"curvatureConfidence":7,"curvatureValue":30001}}}}}}
...
</pre><h3>Using the mw-binaries</h3>
<p>As explained in the middleware's documentation, services use Publish-Subscribe or Cache internal mechanisms as input or output. Since the CaService is a messaging Facility it uses the Publish-Subscribe mechanism.</p>
<ul>
<li>First we need to identify the <b>message id</b> for received CAM :</li>
</ul>
<p><em>note :</em> Please remember that <b>message id</b> is an integer that identifies a channel, on which a facility and/or application will publish data, e.g received CAM messages</p>
<p>This can be achieved by looking at the CaService configuration file <b>etc/mw-server/config/40-caservice.xml</b> </p><pre class="fragment">&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;configuration&gt;

    &lt;service start="true" instance="0"&gt;CaService&lt;/service&gt;
    &lt;config&gt;

        &lt;pubsub senderid="61" outcam="22" incam="32" owncam="42" /&gt;


        &lt;cache inCacheId="1" VDPCacheId="0" stationPropertiesId="3" pathhistorycacheid="9" /&gt;
...
</pre><p><b>pubsub.senderid</b> is the unique application id of the CaService.</p>
<p><b>pubsub.outcam</b> is the message id where facilities and applications can publish formatted CAM message to send them on the ITS-G5 network.</p>
<p><b>pubsub.incam</b> is the message id where facilities and applications can subscribe to retrieve received CAM message from the ITS-G5 network.</p>
<p><b>pubsub.owncam</b> is the message id where facilities and applications can subscribe to retrieve ego-station generated message in destination to the ITS-G5 network.</p>
<ul>
<li>According to the configuration, the message id to subscribe to in order to retrieve received CAM message is the one identified by <b>pubsub.incam</b> configuration and value <b>32</b></li>
</ul>
<p>Using mwpubsub in subscribe mode we ask to the middleware to distribute to us each new message</p>
<p><em>note:</em> most API calls are identified by an <b>Application id</b> which is the unique identifier of a middleware client. Using an already registered <b>application id</b> could set the middleware-server in a undefined state (restart necessary). Users must user a unique <b>application id</b> per client. Additionally, users should pick a value greater than 1024.</p>
<p>mwpubsub's argument <code>-a</code> is for the <b>application id</b>, <code>-m</code> <b>message id</b> and <code>-s</code> for subscribe mode</p>
<pre class="fragment">itsuser@YBOX-VEHI-1603-1234:~$ mwpubsub -s -a 1025 -m 32
{"itsPduHeader":{"messageID":2,"protocolVersion":1,"stationId":9912},"cam":{"generationDeltaTime":4932,"camParameters":{"basicContainer":{"referencePosition":{"altitude":{"altitudeValue":9492,"altitudeConfidence":0},"posConfidenceEllipse":{"semiMajorOrientation":0,"semiMinorConfidence":1,"semiMajorConfidence":1},"latitude":481349512,"longitude":-16223208},"stationType":0},"highFrequencyContainer":{"0":{"vehicleLength":{"vehicleLengthValue":1023,"vehicleLengthConfidenceIndication":4},"accelerationControl":"0000000","vehicleWidth":61,"yawRate":{"yawRateValue":32767,"yawRateConfidence":8},"heading":{"headingValue":3601,"headingConfidence":127},"curvatureCalculationMode":2,"longitudinalAcceleration":{"longitudinalAccelerationValue":161,"longitudinalAccelerationConfidence":102},"driveDirection":2,"speed":{"speedValue":0,"speedConfidence":127},"curvature":{"curvatureConfidence":7,"curvatureValue":30001}}}}}}
{"itsPduHeader":{"messageID":2,"protocolVersion":1,"stationId":9999},"cam":{"generationDeltaTime":4993,"camParameters":{"basicContainer":{"referencePosition":{"altitude":{"altitudeValue":13096,"altitudeConfidence":0},"posConfidenceEllipse":{"semiMajorOrientation":0,"semiMinorConfidence":1,"semiMajorConfidence":1},"latitude":481347572,"longitude":-16224152},"stationType":0},"highFrequencyContainer":{"0":{"vehicleLength":{"vehicleLengthValue":30,"vehicleLengthConfidenceIndication":4},"accelerationControl":"0000000","vehicleWidth":14,"yawRate":{"yawRateValue":32767,"yawRateConfidence":8},"heading":{"headingValue":0,"headingConfidence":127},"curvatureCalculationMode":2,"longitudinalAcceleration":{"longitudinalAccelerationValue":161,"longitudinalAccelerationConfidence":102},"driveDirection":2,"speed":{"speedValue":0,"speedConfidence":127},"curvature":{"curvatureConfidence":7,"curvatureValue":30001}}}}}}
{"itsPduHeader":{"messageID":2,"protocolVersion":1,"stationId":9912},"cam":{"generationDeltaTime":5036,"camParameters":{"basicContainer":{"referencePosition":{"altitude":{"altitudeValue":9492,"altitudeConfidence":0},"posConfidenceEllipse":{"semiMajorOrientation":0,"semiMinorConfidence":1,"semiMajorConfidence":1},"latitude":481349512,"longitude":-16223208},"stationType":0},"highFrequencyContainer":{"0":{"vehicleLength":{"vehicleLengthValue":1023,"vehicleLengthConfidenceIndication":4},"accelerationControl":"0000000","vehicleWidth":61,"yawRate":{"yawRateValue":32767,"yawRateConfidence":8},"heading":{"headingValue":3601,"headingConfidence":127},"curvatureCalculationMode":2,"longitudinalAcceleration":{"longitudinalAccelerationValue":161,"longitudinalAccelerationConfidence":102},"driveDirection":2,"speed":{"speedValue":0,"speedConfidence":127},"curvature":{"curvatureConfidence":7,"curvatureValue":30001}}},"lowFrequencyContainer":{"0":{"vehicleRole":0,"exteriorLights":"00000000","pathHistory":[]}}}}}

...
</pre><p>In the example above, the default format is used. It is possible to request a different format when subscribing. For example, the middleware can provide the user with a hex-encoded ASN1 UPER format:</p>
<pre class="fragment">itsuser@YBOX-VEHI-1603-1234:~$ mwpubsub -s -a 1025 -m 32 -j 2 -r
01020000270fdf00000a4ab61e8d4a484d000200200037390040000fc0007e81d86d0737530f5fffb000
0102000026b8df16000a4ab7110d4a48c3000200200035768040e11fc0007ebfe9e50737530f5fffb000
01020000270fdf68400a4ab61e8d4a484d000200200037390040000fc0007e81d86d0737530f5fffb00000015ffff7ffff1ce40d59758105d9c115f8e700
0102000026b8df7d400a4ab7110d4a48c3000200200035768040e11fc0007ebfe9e50737530f5fffb000000000
</pre><p>Furthermore, messages coming from ITS-G5 have radio-layer metadata. Use <code>-M</code> to retrieve this information.</p>
<p><em>note</em> : some information in metadata are still a work in progress </p><pre class="fragment">itsuser@YBOX-VEHI-1603-1234:~$ mwpubsub -s -a 1025 -m 32 -M
{"itsPduHeader":{"messageID":2,"protocolVersion":1,"stationId":9999},"cam":{"generationDeltaTime":1319,"camParameters":{"basicContainer":{"referencePosition":{"altitude":{"altitudeValue":13096,"altitudeConfidence":0},"posConfidenceEllipse":{"semiMajorOrientation":0,"semiMinorConfidence":1,"semiMajorConfidence":1},"latitude":481347572,"longitude":-16224152},"stationType":0},"highFrequencyContainer":{"0":{"vehicleLength":{"vehicleLengthValue":30,"vehicleLengthConfidenceIndication":4},"accelerationControl":"0000000","vehicleWidth":14,"yawRate":{"yawRateValue":32767,"yawRateConfidence":8},"heading":{"headingValue":0,"headingConfidence":127},"curvatureCalculationMode":2,"longitudinalAcceleration":{"longitudinalAccelerationValue":161,"longitudinalAccelerationConfidence":102},"driveDirection":2,"speed":{"speedValue":0,"speedConfidence":127},"curvature":{"curvatureConfidence":7,"curvatureValue":30001}}}}}}

Metadata :
radiomacdest = [ff,ff,ff,ff,ff,ff]
radiopower = -79
radiofrequency = 5900
radiotimestamp = 447005138359869
radiomacsource = [76,6f,f7,22,fb,a0]
radiodatarate = 0
radiopriority = 0

{"itsPduHeader":{"messageID":2,"protocolVersion":1,"stationId":9912},"cam":{"generationDeltaTime":1401,"camParameters":{"basicContainer":{"referencePosition":{"altitude":{"altitudeValue":9492,"altitudeConfidence":0},"posConfidenceEllipse":{"semiMajorOrientation":0,"semiMinorConfidence":1,"semiMajorConfidence":1},"latitude":481349512,"longitude":-16223208},"stationType":0},"highFrequencyContainer":{"0":{"vehicleLength":{"vehicleLengthValue":1023,"vehicleLengthConfidenceIndication":4},"accelerationControl":"0000000","vehicleWidth":61,"yawRate":{"yawRateValue":32767,"yawRateConfidence":8},"heading":{"headingValue":3601,"headingConfidence":127},"curvatureCalculationMode":2,"longitudinalAcceleration":{"longitudinalAccelerationValue":161,"longitudinalAccelerationConfidence":102},"driveDirection":2,"speed":{"speedValue":0,"speedConfidence":127},"curvature":{"curvatureConfidence":7,"curvatureValue":30001}}}}}}

Metadata :
radiomacdest = [ff,ff,ff,ff,ff,ff]
radiopower = -86
radiotimestamp = 447005138442600
radiofrequency = 5900
radiopriority = 0
radiomacsource = [76,6f,f7,22,fa,d5]
radiodatarate = 0
</pre><h3>Using the API</h3>
<p>YoGoKo provides an iso-functional API in C and Java over TCP and a Web API through WebSocket. The SDK archive contains examples on how to do publish/subscribe operations using each supported API.</p>
<h2>How to set a static position ?</h2>
<p>Edit the configuration file of PositionProvider services <b>etc/mw-server/config/30-positionprovider.xml</b></p>
<p>Enable static provider by settings <b>staticprovider.enable</b> to true and position entry as needed: </p><pre class="fragment">&lt;staticprovider enable="true"
latitude="48.1350568"
longitude="-1.6221928"
altitude="0"
speed="0"
heading="0"
climb="0"
leapseconds2004="5" /&gt;
</pre><p>Restart mw-server using: </p><pre class="fragment">root@YBOX-VEHI-1603-1234:~# systemctl restart mw-server
</pre><h2>How to get raw GNSS feed ?</h2>
<p>Subscribing to "message id" 201 will by default output the GNSS feed use to fill the VDP cache. This feed can also be retrieved using mw-binaries or the API. </p><pre class="fragment">root@YBOX-VEHI-1603-1234:~# mwpubsub -s -m 201 -a 454515
{"data_source":0,"error_position_altitude_m":0.0000000,"error_position_horizontal_major_axis_direction_deg":0.0000000,"error_position_horizontal_semi_major_axis_length_m":0.0000000,"error_position_horizontal_semi_minor_axis_length_m":0.0000000,"error_time_s":1.0000000,"mode":1,"movement_horizontal_direction_deg":0.0000000,"movement_horizontal_speed_mps":0.0000000,"position_altitude_m":132.0600000,"position_latitude_deg":48.1347425,"position_longitude_deg":-1.6224138,"satellites_num":[10,9],"time":{"leap_seconds_since_2004":5 ,"positive_leap_second":0 ,"tai_seconds_since_2004": 447084444.3000000 }}
{"data_source":0,"error_position_altitude_m":0.0000000,"error_position_horizontal_major_axis_direction_deg":0.0000000,"error_position_horizontal_semi_major_axis_length_m":0.0000000,"error_position_horizontal_semi_minor_axis_length_m":0.0000000,"error_time_s":1.0000000,"mode":1,"movement_horizontal_direction_deg":0.0000000,"movement_horizontal_speed_mps":0.0000000,"position_altitude_m":132.0600000,"position_latitude_deg":48.1347425,"position_longitude_deg":-1.6224138,"satellites_num":[10,9],"time":{"leap_seconds_since_2004":5 ,"positive_leap_second":0 ,"tai_seconds_since_2004": 447084444.4000000 }}
</pre><h2>How to get GNSS feed through a GPSD socket ?</h2>
<p>The Position Provider service of middleware can be configured to get GNSS feed from a GPSD server</p>
<p>Edit the configuration file <b>etc/mw-server/30-position-provider.xml</b> Enable GPSD client by setting <b>gpsprovider.enable</b> to true</p>
<pre class="fragment">&lt;gpsprovider enable="true"
             address="127.0.0.1"
             port="2947"
             retryinterval="3000" /&gt;
</pre><p><em>note :</em> For units based on Autotalks V2X solution (YBOX-ROAD-1602- / YBOX-VEHI-1603-) The default GNSS feed should be disabled or ignored by PositionProvider This could be performed by changing the source message id of GNSS fix <b>pubsub.positionmessageid</b> in <b>etc/mw-server/30-position-provider.xml</b> Or by disabling Position Service in Autotalks system. Set <b>positionprovider.enabled</b> to 0 in <b>etc/mw-server/config/60-autotalksservices.xml</b></p>
<h2>How to get VDP cache ?</h2>
<h3>1. Using its-vdp-updates, the output will be updated at each changes in VDP cache</h3>
<pre class="fragment">root@YBOX-VEHI-1603-21FB77:~# its-vdp-updates
Receiving VDP updates
choir_client : tcp socket open on tcp://127.0.0.1:49154
source = "static"
mode = 1
ls2004 = 5
utctime = 1519999752.000000
itstime = 447084557.000000
lat = 48.134743
lon = -1.622414
alt = 132.060000
speed = 0.000000
climb = 0.000000
timeerror = 1.000000
ept = 1.000000
altitudeerror = 0.000000
epv = 0.000000
posmajoraxisdirection = 0.000000
possemimajoraxiserror = 0.000000
possemiminoraxiserror = 0.000000
</pre><h3>2. Alternatively the mwcache binaries or API can request the VDP Cache</h3>
<p>The VDP is stored in "Cache id" 0 and "Object id" 1</p>
<p>Get the cache using mwcache : </p><pre class="fragment">root@YBOX-VEHI-1603-1234:~# mwcache -a 4454 -g -c 0 -o 1
choir_client : tcp socket open on tcp://127.0.0.1:49154
source = "static"
mode = 1
ls2004 = 5
itstime = 447084848.000000
utctime = 1520000043.000000
lat = 48.134743
lon = -1.622414
alt = 132.060000
speed = 0.000000
timeerror = 1.000000
climb = 0.000000
ept = 1.000000
altitudeerror = 0.000000
epv = 0.000000
posmajoraxisdirection = 0.000000
possemimajoraxiserror = 0.000000
possemiminoraxiserror = 0.000000
</pre><h3>3. Using the API</h3>
<p>YoGoKo provides an iso-functional API in C and Java over TCP and a Web API through WebSocket The SDK archive contains examples on how to perform Cache requests in each supported programming language.</p>
<h2>How to record/replay received ITS-G5 and GNSS feed ?</h2>
<p>The middleware-server has the ability to record a running session by saving GNSS fix and messages from the ITS-G5 network. The record can then be replayed for debug or demonstration purposes.</p>
<p>The Recorder service needs to be started</p><ul>
<li><p class="startli">Statically : Set "start" directive to true in <b>etc/mw-server/80-recorder.xml</b>, and restart the middleware:</p>
<p class="startli">$ systemctl restart mw-server</p>
</li>
<li><p class="startli">Dynamically : Start it using mwconfig :</p>
<p class="startli">itsuser-VEHI-1603-1234:~$ mwconfig control start -t Recorder</p>
</li>
</ul>
<p>Start a new capture named "test_record" : </p><pre class="fragment">$ mwconfig mib set -t Recorder -i 0 'recorder.action="record"' 'recorder.capturename="test_record"'
</pre><p>Check recording status : </p><pre class="fragment">$ mwconfig mib get -t Recorder -i 0 'recorder.status'
recorder.status = "recording"
</pre><p>Stop capture : </p><pre class="fragment">$ mwconfig mib set -t Recorder -i 0 'recorder.action="stop"'
</pre><p>Stop CaService and AutotalksServices, and replay the capture </p><pre class="fragment">$ mwconfig control stop -t CaService -i 0
$ mwconfig control stop -t AutotalksServices -i 0
$ mwconfig mib set -t Recorder -i 0 'recorder.action="replay"' 'recorder.capturename="test_record"'
</pre><h2>How to trigger a DENM ?</h2>
<p>The DenmTrigApplication needs to be started</p><ul>
<li>Statically : Set "start" directive to true in <b>etc/mw-server/80-denmapp.xml</b>, and restart the middleware:</li>
</ul>
<pre class="fragment">$ systemctl restart mw-server
</pre><ul>
<li>Dynamically : Start it using mwconfig :</li>
</ul>
<pre class="fragment">itsuser@YBOX-VEHI-1603-1234:~$ mwconfig control start -t DenmTrigApplication
</pre><p>Check if events are present in LDM : </p><pre class="fragment">root@YBOX-VEHI-1603-1234:~# its-ldmevents-show
Displaying event information
choir_client : tcp socket open on tcp://127.0.0.1:49154
</pre><p>No events are running, trigger it: </p><pre class="fragment">root@YBOX-VEHI-1603-1234:~# mwconfig mib set -t DenmTrigApplication 'denm1s1.active=true' 'denm1s1.fields.count=1' 'denm1s1.field1.path="validityDuration"' 'denm1s1.field1.value="60"'
</pre><p>Check LDM : </p><pre class="fragment">root@YBOX-VEHI-1603-1234:~# its-ldmevents-show
Displaying event information
choir_client : tcp socket open on tcp://127.0.0.1:49154
281481500557313: choir_client : tcp socket open on tcp://127.0.0.1:49154
own = true
objecttype = "event"
stationid = 99546
sequencenumber = 1
lastupdate = 1520434933102
latitude = 48.134743
longitude = -1.622414
relevancedistance = 500
stationtype = 5
referencetime = 447519689594
detectiontime = 447519689589
terminationtime = 447519749594
causecode = 2
subcausecode = 7
quality = 0
distance = 0.007421
direction = 89.999998
detected = -48532.000000
terminating = 11473.000000
relevance = 3
</pre><h2>Send IPv6 packet on 802.11p link using V2XAdapter and choir API</h2>
<p>V2XAdapter has the capability to expose through a choir pubsub channel IPv6/UDP socket for unicast/multicast or broadcast target</p>
<p>Let's assume we have the following need:</p>
<ul>
<li>YBOX-VEHI-1603-0001 : An UDP server listening on 2008</li>
<li>YBOX-VEHI-1603-0002 : An UDP server listening on 2008</li>
<li>YBOX-VEHI-1603-0003 : An UDP client sending messages on port 2008</li>
</ul>
<p>Configuration of YBOX-VEHI-1603-0001</p>
<pre class="fragment">&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;configuration&gt;
    &lt;service start="true" instance="0"&gt;V2XAdapter&lt;/service&gt;
    &lt;config&gt;
        &lt;index sender="0" receiver="1"/&gt;
        &lt;receiver1 ipv6="true" iface="v2x1" address="::" port="2008" publish="18" /&gt;
    &lt;/config&gt;
&lt;/configuration&gt;
</pre><p>Configuration of YBOX-VEHI-1603-0002</p>
<pre class="fragment">&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;configuration&gt;
&lt;service start="true" instance="0"&gt;V2XAdapter&lt;/service&gt;
    &lt;config&gt;
        &lt;index sender="0" receiver="1"/&gt;
        &lt;receiver1 ipv6="true" iface="v2x1" address="::" port="2008" publish="18" /&gt;
    &lt;/config&gt;
&lt;/configuration&gt;
</pre><p>Configuration of YBOX-VEHI-1603-0003</p>
<pre class="fragment">&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;configuration&gt;
    &lt;service start="true" instance="0"&gt;V2XAdapter&lt;/service&gt;
    &lt;config&gt;
        &lt;index sender="2" receiver="0"/&gt;
        &lt;sender1 ipv6="true" iface="v2x1" address="fe80::746f:f7ff:fe23:fb3c" port="2008" subscribe="8" appid="2008" /&gt;
        &lt;sender2 ipv6="true" iface="v2x1" address="fe80::746f:f7ff:fe23:fc5c" port="2008" subscribe="9" appid="2009" /&gt;
        &lt;sender3 ipv6="true" iface="v2x1" address="ff02::1" port="2008" subscribe="491" appid="2009" /&gt;
    &lt;/config&gt;
&lt;/configuration&gt;
</pre><p>The IPv6 address configured on sender1 corresponds to the IPv6 address of v2x1 on YBOX-VEHI-1603-0001.</p>
<p>The IPv6 address configured on sender2 corresponds to the IPv6 address of v2x1 on YBOX-VEHI-1603-0002.</p>
<p>The IPv6 address configured on sender3 corresponds to an IPv6 multicast address, both units configured as receivers will receive the message.</p>
<p>The user can now publish messages on "message id" 8 or 9 on YBOX-VEHI-1603-0003. Message id 8 will send the message to YBOX-VEHI-1603-0001. Message id 9 will send the message to YBOX-VEHI-1603-0002. Message id 491 will send the message to YBOX-VEHI-1603-0001 and YBOX-VEHI-1603-0002. On the receiver side, the user can subscribe to "message id" 18 to receive messages emitted by the sender.</p>
<h2>How to remount the file system in read-write ?</h2>
<p>By default the YBOX- file system are mount in read only. User "root" and "sysadmin" can remount filesystem by using the following command:</p>
<pre class="fragment">root@YBOX-VEHI-1603-1234:~# mount -o remount,rw /
</pre><h2>How to capture traffic from ITS-G5 stack and pipe it to desktop/laptop's wireshark on linux</h2>
<p>With a GNU/Linux computer Connect to the unit's WiFi network with password YoGoKo1234 Run a remote wireshark capture through ssh on YBOX with user itsuser and password itspwd :</p>
<pre class="fragment">$ ssh itsuser@192.168.50.254 "dumpcap -P -i v2x0 -w -" | wireshark -i - -k
</pre><p><em>note :</em> The password should be filled within a few seconds on the terminal prompt (like a classic ssh connection)</p>
<p><em>note :</em> On some distributions the wireshark binary is called wireshark-gtk </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
    <div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
        <ul>
            <li class="footer">Generated on Tue Mar 14 2023 16:13:25 by <a href="http://www.doxygen.org/index.html">
                       <img class="footer" src="doxygen.png" alt="doxygen"></a> 1.8.13</li>
        </ul>
    </div>
    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <script src="bootstrap.min.js"></script>
    <script src="jquery.smartmenus.min.js"></script>
    <script src="jquery.smartmenus.bootstrap.min.js"></script>
    <script src="yogoko-doxy.js"></script>
  </body>
</html>
